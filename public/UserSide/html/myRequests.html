<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telefon Tamiri</title>
    <meta name="description"
        content="Yerinde ve garantili cep telefonu tamiri hizmeti! Uygun fiyatlarla ekran, batarya deƒüi≈üimi ve teknik servis √ß√∂z√ºmleri. Hƒ±zlƒ± ve g√ºvenilir tamir i√ßin hemen ula≈üƒ±n.">
    <link rel="canonical" href="https://telefon-tamiri-seng209-211.com.tr/">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <meta property="og:title" content="Uygun Fiyatlarla Akƒ±llƒ± Cihaz Tamir Hizmeti Sizlerle">
    <meta property="og:description" content=" Hƒ±zlƒ± ve g√ºvenilir tamir i√ßin hemen ula≈üƒ±n.">
    <meta property="og:url" content="https://telefon-tamiri-seng209-211.com.tr/">
    <link rel="stylesheet" href="../css/myRequests.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <!-- URL Lƒ∞NKƒ∞Nƒ∞ DAHA G√úZEL Bƒ∞R ≈ûEY YAP PLS-->
</head>

<body class="main page-loading animation">
        <!-- Header -->
        <header>
            <!-- Logo -->
            <div class="logo">
                <a href="dashboard.html">
                    <img src="https://img.pikbest.com/origin/09/23/99/24DpIkbEsTkVb.png!sw800" alt="Telefon Tamiri"
                        width="150">
                </a>
            </div>
    
            <!-- Navigation -->
            <nav>
                <ul>
                    <li><a href="myRequests.html">Taleplerim</a></li>
                    <li><a href="products.html">Aksesuar ve Ek √úr√ºnler</a></li>
                    <li><a href="hakkƒ±mƒ±zda.html">Hakkƒ±mƒ±zda</a></li>
                    <li><a href="SSS.html">SSS</a></li>
                    <li class="dropdown">
                        <button class="dropdown-button">Admin Kullanƒ±cƒ±sƒ±</button>
                        <div class="dropdown-content">
                            <a href="#">√ñdemeler</a>
                            <a href="#">√áalƒ±≈üanlar</a>
                            <a href="changePassword.html">≈ûifre deƒüi≈ütir</a>
                            <a href="../../../index.html">√áƒ±kƒ±≈ü Yap</a>
                        </div>
                    </li>
                </ul>
            
            </nav>
    
        </header>


    <!-- ANA BA≈ûLIK -->
    <section class="section-title">
        <h1>TALEPLERƒ∞M</h1>
    </section>

    <!-- ARAMA ALANI -->
    <section class="search-bar">
        <div class="search-container">
            <label for="search"></label>
            <input type="text" id="search" placeholder="Talep no/ M√º≈üteri Adƒ± vs">
            <button class="search-btn">ARA</button>
        </div>
    </section>

    <!-- TALEP TABLOSU -->
    <section class="table-container">
        <table>
            <thead>
                <tr>
                    <th><b>Talep No</b></th>
                    <th><b>Model</b></th>
                    <th><b>M√º≈üteri Adƒ±</b></th>
                    <th><b>Telefon No</b></th>
                    <th><b>Problem</b></th>
                    <th><b>Tarih</b></th>
                    <th><b>Durum</b></th>
                    <th><b>Yedek Cihaz</b></th>
                    <th><b>√úcret</b></th>
                    <th><b>D√úZENLE</b></th>
                    <th><b>Sƒ∞L</b></th>
                </tr>
            </thead>
            <tbody>
                <!-- buraya script ile form verilerinin html ini dolduruyoruz-->
            </tbody>
        </table>
    </section>

    <!-- SAYFALAMA -->
    <section class="pagination">
        <a href="#">1</a>
        <a href="#">2</a>
        <a href="#">3</a>
        <a href="#">4</a>
        <a href="#">5</a>
        <span>...</span>
        <a href="#">11</a>
    </section>


    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <!-- Sol S√ºtun -->
            <div class="footer-column">
                <h3>Telefon Tamiri</h3>
                <ul>
                    <li><a href="https://telefon-tamiri-seng209-211.com.tr/talep-olustur">Talep Olu≈ütur</a></li>
                    <li><a href="https://telefon-tamiri-seng209-211.com.tr/talep-sorgula">Talep Sorgula</a></li>
                    <li><a href="https://telefon-tamiri-seng209-211.com.tr/aksesuar-ve-ek-√ºr√ºnler">Aksesuar ve Ek
                            √úr√ºnler</a></li>
                    <li><a href="https://telefon-tamiri-seng209-211.com.tr/hakkƒ±mƒ±zda">Hakkƒ±mƒ±zda</a></li>
                    <li><a href="https://telefon-tamiri-seng209-211.com.tr/sikca-sorulan-sorular">SSS</a></li>
                </ul>
            </div>
            <!-- Orta S√ºtun -->
            <div class="footer-column">
                <h3>ƒ∞leti≈üim</h3>
                <p>Adres:√áankaya/Ankara</p>
                <p>Email: <a href="mailto:destek@gmail.com">destek@gmail.com</a></p>
                <p>Telefon: <a href="tel:+905XXXXXXXXX">0 (XXX) XXX XX XX</a></p>
                <p>√áalƒ±≈üma Saatleri: 09:00 - 19:30</p>
            </div>
            <!-- Saƒü S√ºtun -->
            <div class="footer-column">
                <h3>Sosyal Medya</h3>
                <a href="https://www.instagram.com/"><img src="https://cdn-icons-png.flaticon.com/256/717/717392.png"
                        alt="Instagram"></a>
                <a href="https://x.com/home"><img
                        src="https://logoeps.com/wp-content/uploads/2014/01/23931-twitter-logo-icon-vector-icon-vector-eps.png"
                        alt="Twitter"></a>
                <a href="https://www.whatsapp.com/"><img
                        src="https://logoeps.com/wp-content/uploads/2014/03/33447-whatsapp-logo-icon-vector-icon-vector-eps.png"
                        alt="WhatsApp"></a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2024 - T√ºm Haklarƒ± Saklƒ±dƒ±r. Telefon Tamiri</p>
        </div>
    </footer>

    <!-- Mesajla≈üma Ikonu -->
    <div class="message-icon">
        <a href="https://tawk.to" target="_blank">
            <img src="https://cdn.pixabay.com/photo/2016/06/13/17/30/mail-1454733_640.png" alt="Mesajla≈üma ƒ∞konu">
        </a>
    </div>

    <script>
        // Talepleri tabloya ekleme
        async function loadRequests() {
            try {
                const response = await fetch('http://localhost:3000/get-requests');
                const requests = await response.json();

                const tbody = document.querySelector('tbody');
                tbody.innerHTML = ''; // Mevcut i√ßeriƒüi temizle

                requests.forEach(request => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${request.queryNum}</td>
                        <td>${request.model}</td>
                        <td>${request.name}</td>
                        <td>${request.phone}</td>
                        <td>${request.sorunlar}</td>
                        <td>${new Date(request.createdAt).toLocaleString('tr-TR')}</td>
                        <td>${request.state}</td>
                        <td>${request.yedekCihaz}</td>
                        <td>${request.price}</td>
                        <td><button onclick="editRequest('${request._id}')">üìù</button></td>
                        <td><button onclick="deleteRequest('${request._id}')">üóëÔ∏è</button></td>
                    `;
                    tbody.appendChild(row);
                });
            } catch (err) {
                console.error('Talepler y√ºklenemedi:', err);
            }
        }

        // Talep Silme
        async function deleteRequest(id) {
            if (!confirm('Bu talebi silmek istediƒüinize emin misiniz?')) return;

            try {
                await fetch(`http://localhost:3000/delete-request/${id}`, { method: 'DELETE' });
                alert('Talep silindi.');
                loadRequests(); // Tabloyu yeniden y√ºkle
            } catch (err) {
                console.error('Talep silinemedi:', err);
            }
        }
        // Talep D√ºzenleme
        function editRequest(id) {
            window.location.href = `talepD√ºzenle.html?id=${id}`;
        }

        // Sayfa y√ºklendiƒüinde talepleri y√ºkle
        document.addEventListener('DOMContentLoaded', loadRequests);
    </script>
</body>

</html>